(function(t){function e(e){for(var o,a,r=e[0],l=e[1],c=e[2],d=0,p=[];d<r.length;d++)a=r[d],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&p.push(n[a][0]),n[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],o=!0,r=1;r<i.length;r++){var l=i[r];0!==n[l]&&(o=!1)}o&&(s.splice(e--,1),t=a(a.s=i[0]))}return t}var o={},n={app:0},s=[];function a(e){if(o[e])return o[e].exports;var i=o[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=o,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(i,o,function(e){return t[e]}.bind(null,o));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/episode-tracker/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"206b":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var o=i("2b0e"),n=i("289d"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("section",[i("div",{staticClass:"app-controls container"},[i("b-field",{attrs:{position:"is-right",grouped:"","group-multiline":""}},[i("b-input",{attrs:{placeholder:"Filter...",type:"search",icon:"magnify"},model:{value:t.filterQuery,callback:function(e){t.filterQuery=e},expression:"filterQuery"}}),i("p",{staticClass:"control"},[i("b-button",{on:{click:function(e){return t.openAddShowModal()}}},[t._v("Add Show")])],1),i("p",{staticClass:"control"},[i("b-button",{on:{click:function(){return t.openSettingsModal()}}},[i("b-icon",{attrs:{icon:"settings"}})],1)],1)],1)],1)]),i("section",[i("div",{staticClass:"container"},[i("show-table",{attrs:{"show-data":t.displayedShows},on:{"confirm-delete":t.openConfirmDeleteModal,"edit-show":t.editShow,"increment-episode":t.incrementEpisode}})],1)])])},a=[],r=i("5530"),l=(i("4de4"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box"},[i("h1",{staticClass:"title"},[t._v("Add Show")]),i("form",{attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[i("b-field",{attrs:{label:"Show Title *",type:{"is-danger":t.errors.title},message:t.errors.title}},[i("b-input",{ref:"title",attrs:{"use-html5-validation":!1,type:"text",maxlength:"50",required:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),i("b-field",{attrs:{grouped:""}},[i("b-field",{attrs:{label:"Last Watched Episode *",type:{"is-danger":t.errors.episode},message:t.errors.episode,expanded:""}},[i("b-numberinput",{attrs:{type:"",min:"0",required:""},model:{value:t.lastEpisode,callback:function(e){t.lastEpisode=e},expression:"lastEpisode"}})],1),i("b-field",{attrs:{label:"Total # of Episodes *",type:{"is-danger":t.errors.episode},expanded:""}},[i("b-numberinput",{attrs:{type:"",min:"0",required:""},model:{value:t.totalEpisodes,callback:function(e){t.totalEpisodes=e},expression:"totalEpisodes"}})],1)],1),i("b-field",{attrs:{label:"Link",type:{"is-danger":t.errors.link},message:t.errors.link}},[i("b-input",{ref:"link",attrs:{"use-html5-validation":!1,type:"url"},model:{value:t.link,callback:function(e){t.link=e},expression:"link"}})],1),i("b-field",{attrs:{grouped:""}},[i("p",{staticClass:"control"},[i("b-button",{attrs:{type:"is-primary",tag:"input","native-type":"submit",value:"Submit"}})],1),i("p",{staticClass:"control"},[i("b-button",{on:{click:function(e){return t.$parent.close()}}},[t._v("Close")])],1)])],1)])}),c=[],u=(i("9911"),{title:"",episode:"",link:""}),d={name:"AddShowForm",data:function(){return{title:"",totalEpisodes:0,lastEpisode:0,link:"",errors:Object(r["a"])({},u)}},methods:{getInputByName:function(t){return this.$refs[t].$el.getElementsByTagName("input")[0]},handleSubmit:function(){var t=!1,e=Object(r["a"])({},u);this.lastEpisode>this.totalEpisodes&&(t=!0,e.episode="Last watched episode must be less than or equal to the total.");var i=this.getInputByName("title");t=t||!i.checkValidity(),e.title=i.validationMessage;var o=this.getInputByName("link");if(t=t||!o.checkValidity(),e.link=o.validationMessage,this.errors=e,!t){var n={title:this.title,totalEpisodes:this.totalEpisodes,lastEpisode:this.lastEpisode,link:this.link};this.$emit("add-show",n),this.$parent.close()}}}},p=d,h=i("2877"),f=Object(h["a"])(p,l,c,!1,null,null,null),b=f.exports,m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box"},[i("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[i("div",{staticClass:"block"},[i("b-radio",{attrs:{name:"isRemote","native-value":!1},model:{value:t.isRemote,callback:function(e){t.isRemote=e},expression:"isRemote"}},[t._v("Local")]),i("b-radio",{attrs:{name:"isRemote","native-value":!0},model:{value:t.isRemote,callback:function(e){t.isRemote=e},expression:"isRemote"}},[t._v("Remote")])],1),i("b-field",{attrs:{label:"API URL"}},[i("b-input",{attrs:{disabled:t.isDisabled,type:"url"},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}})],1),i("b-field",{attrs:{label:"API Key"}},[i("b-input",{attrs:{disabled:t.isDisabled,type:"password","password-reveal":""},model:{value:t.key,callback:function(e){t.key=e},expression:"key"}})],1),i("b-field",{attrs:{grouped:""}},[i("p",{staticClass:"control"},[i("b-button",{attrs:{type:"is-primary",tag:"input","native-type":"submit",value:"Save"}})],1),i("p",{staticClass:"control"},[i("b-button",{on:{click:t.closeForm}},[t._v("Close")])],1)])],1)])},v=[],w={name:"SettingsForm",props:{prefill:Object},data:function(){var t=this.prefill,e=t.isRemote,i=void 0!==e&&e,o=t.url,n=void 0===o?"":o;return{isRemote:i,url:n,key:""}},computed:{isDisabled:function(){return!this.isRemote||"true"}},methods:{handleSubmit:function(){var t={isRemote:this.isRemote,url:this.url,key:this.key};this.$emit("save-settings",t)},closeForm:function(){this.$emit("load-shows"),this.$emit("close")}}},g=w,y=Object(h["a"])(g,m,v,!1,null,null,null),S=y.exports,k=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box"},[i("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[i("div",{staticClass:"content"},[t._v('Are you sure you want to delete "'+t._s(t.show.title)+'"?')]),i("b-field",{attrs:{grouped:""}},[i("p",{staticClass:"control"},[i("b-button",{attrs:{type:"is-danger",tag:"input","native-type":"submit",value:"Delete"}})],1),i("p",{staticClass:"control"},[i("b-button",{on:{click:function(e){return t.$parent.close()}}},[t._v("Cancel")])],1)])],1)])},E=[],x={name:"ConfirmDeleteForm",props:{show:{type:Object,required:!0}},methods:{handleSubmit:function(){this.$emit("delete-show",this.show.id),this.$parent.close()}}},O=x,_=Object(h["a"])(O,k,E,!1,null,null,null),C=_.exports,j=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-table",{staticClass:"show-table",attrs:{data:t.showData,columns:t.showData.length?void 0:t.$options.columns,detailed:"","detail-key":"id","custom-row-key":"id","opened-detailed":t.openedShow,"show-detail-icon":!1,"mobile-cards":!1},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[i("b-table-column",{attrs:{field:"title",label:"Title"}},[o.link.length?i("span",[i("a",{attrs:{target:"_blank",rel:"noopener noreferrer",href:o.link}},[t._v(t._s(o.title))])]):i("span",[t._v(t._s(o.title))])]),i("b-table-column",{attrs:{field:"lastEpisode",label:"Episodes",width:"500"}},[i("b-progress",{staticClass:"progress-bar",attrs:{type:"is-primary",size:"is-medium","show-value":"",value:o.lastEpisode,max:o.totalEpisodes}},[t._v(t._s(o.lastEpisode)+" / "+t._s(o.totalEpisodes))])],1),i("b-table-column",{attrs:{label:"Actions",width:"140",numeric:""}},[i("div",{staticClass:"buttons is-right"},[i("b-tooltip",{attrs:{label:"Increment"}},[i("b-button",{attrs:{type:"is-text",size:"is-small"},on:{click:function(e){return t.$emit("increment-episode",o)}}},[i("b-icon",{attrs:{icon:"plus"}})],1)],1),i("b-tooltip",{attrs:{label:"Edit"}},[i("b-button",{attrs:{type:"is-text",size:"is-small"},on:{click:function(e){return t.toggleOpenedShow(o.id)}}},[i("b-icon",{attrs:{icon:"pencil-box-multiple"}})],1)],1),i("b-tooltip",{attrs:{label:"Delete"}},[i("b-button",{attrs:{type:"is-text",size:"is-small"},on:{click:function(e){return t.$emit("confirm-delete",o)}}},[i("b-icon",{attrs:{icon:"delete"}})],1)],1)],1)])]}},{key:"detail",fn:function(e){var o=e.row;return[i("edit-show-form",{attrs:{prefill:o},on:{"close-form":function(){return t.openedShow=[]},"edit-show":t.handleEdit}})]}}])},[i("template",{slot:"empty"},[i("section",{staticClass:"section"},[i("div",{staticClass:"content has-text-grey has-text-centered"},[i("p",[i("b-icon",{attrs:{icon:"emoticon-sad",size:"is-large"}})],1),i("p",[t._v("Nothing here.")])])])])],2)},$=[],P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("form",{attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[i("b-field",{attrs:{label:"Show Title *",type:{"is-danger":t.errors.title},message:t.errors.title}},[i("b-input",{ref:"title",attrs:{"use-html5-validation":!1,type:"text",maxlength:"50",required:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),i("b-field",{attrs:{grouped:""}},[i("b-field",{attrs:{label:"Last Watched Episode *",type:{"is-danger":t.errors.episode},message:t.errors.episode,expanded:""}},[i("b-numberinput",{attrs:{type:"",min:"0",required:""},model:{value:t.lastEpisode,callback:function(e){t.lastEpisode=e},expression:"lastEpisode"}})],1),i("b-field",{attrs:{label:"Total # of Episodes *",type:{"is-danger":t.errors.episode},expanded:""}},[i("b-numberinput",{attrs:{type:"",min:"0",required:""},model:{value:t.totalEpisodes,callback:function(e){t.totalEpisodes=e},expression:"totalEpisodes"}})],1)],1),i("b-field",{attrs:{label:"Link",type:{"is-danger":t.errors.link},message:t.errors.link}},[i("b-input",{ref:"link",attrs:{type:"url","use-html5-validation":!1},model:{value:t.link,callback:function(e){t.link=e},expression:"link"}})],1),i("b-field",{attrs:{position:"is-right",grouped:""}},[i("p",{staticClass:"control"},[i("b-button",{attrs:{type:"is-primary",tag:"input","native-type":"submit",value:"Update"}})],1),i("p",{staticClass:"control"},[i("b-button",{on:{click:function(e){return t.$emit("close-form")}}},[t._v("Close")])],1)])],1)},A=[],D={title:"",episode:"",link:""},I={name:"EditShowForm",props:{prefill:Object},data:function(){var t=this.prefill,e=t.title,i=void 0===e?"":e,o=t.totalEpisodes,n=void 0===o?0:o,s=t.lastEpisode,a=void 0===s?0:s,l=t.link,c=void 0===l?"":l;return{title:i,totalEpisodes:n,lastEpisode:a,link:c,errors:Object(r["a"])({},D)}},methods:{getInputByName:function(t){return this.$refs[t].$el.getElementsByTagName("input")[0]},handleSubmit:function(){var t=!1,e=Object(r["a"])({},D);this.lastEpisode>this.totalEpisodes&&(t=!0,e.episode="Last watched episode must be less than or equal to the total.");var i=this.getInputByName("title");t=t||!i.checkValidity(),e.title=i.validationMessage;var o=this.getInputByName("link");if(t=t||!o.checkValidity(),e.link=o.validationMessage,this.errors=e,!t){var n={title:this.title,totalEpisodes:this.totalEpisodes,lastEpisode:this.lastEpisode,link:this.link};this.$emit("edit-show",this.prefill.id,n)}}}},T=I,R=Object(h["a"])(T,P,A,!1,null,null,null),M=R.exports,N={name:"ShowTable",components:{EditShowForm:M},props:{showData:Array,confirmDelete:Function,incrementEpisode:Function},data:function(){return{openedShow:[]}},columns:[{label:"Title"},{label:"Episodes"},{label:"Actions"}],methods:{toggleOpenedShow:function(t){this.openedShow.length&&this.openedShow[0]===t?this.openedShow=[]:this.openedShow=[t]},handleEdit:function(t,e){this.openedShow=[],this.$emit("edit-show",t,e)}}},L=N,F=(i("dd27"),Object(h["a"])(L,j,$,!1,null,"729447b2",null)),q=F.exports,B=i("2909"),J=(i("d3b7"),i("c740"),i("c437")),U=function(){var t=[];try{t=JSON.parse(window.localStorage.getItem("shows"))||[]}catch(a){t=[]}var e=function(){return window.localStorage.setItem("shows",JSON.stringify(t))},i=function(){return new Promise((function(e){e(Object(B["a"])(t))}))},o=function(i){return new Promise((function(o){t.push(Object(r["a"])({id:J()},i)),e(),o()}))},n=function(i){return new Promise((function(o){t=t.filter((function(t){return t.id!==i})),e(),o()}))},s=function(i,o){return new Promise((function(n){var s=t.findIndex((function(t){return t.id===i}));t[s]=Object(r["a"])(Object(r["a"])({},t[s]),o),e(),n()}))};return{getShows:i,addShow:o,deleteShow:n,editShow:s}},z=(i("99af"),function(t,e){var i={Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},o=function(t){if(!t.ok)throw new Error(t.status);return t},n=function(){return fetch(t,{method:"GET",headers:i}).then(o).then((function(t){return t.json()}))},s=function(e){return fetch(t,{method:"POST",headers:i,body:JSON.stringify(e)}).then(o)},a=function(e){return fetch("".concat(t,"/").concat(e),{method:"DELETE",headers:i}).then(o)},r=function(e,n){return fetch("".concat(t,"/").concat(e),{method:"PUT",headers:i,body:JSON.stringify(n)}).then(o)};return{getShows:n,addShow:s,deleteShow:a,editShow:r}}),Q=Object(r["a"])({isRemote:!1,url:"",key:""},JSON.parse('{"isRemote":true,"url":"https://demo.ericmchoi.dev/ep-tracker/api/shows","key":"Ot4jvtOolS5_WoY-8wzDXA"}')),V={name:"app",components:{ShowTable:q},data:function(){return{focusedShow:{},shows:[],filterQuery:""}},computed:{displayedShows:function(){var t=this;return this.filterQuery?this.shows.filter((function(e){var i=e.title.toLowerCase(),o=t.filterQuery.toLowerCase();return-1!==i.indexOf(o)})):this.shows}},created:function(){try{this.settings=JSON.parse(window.localStorage.getItem("settings"))||Q}catch(t){this.settings=Q}this.loadSettings(),this.loadShows()},methods:{addShow:function(t){var e=this;this.api.addShow(t).then((function(){e.loadShows()})).catch((function(){e.openErrorSnackbar("Unable to perform action. Please check your API settings.")}))},deleteShow:function(t){var e=this;this.isDeleteShowModalActive=!1,this.api.deleteShow(t).then((function(){e.loadShows()})).catch((function(){e.openErrorSnackbar("Unable to perform action. Please check your API settings.")}))},editShow:function(t,e){var i=this;this.api.editShow(t,e).then((function(){return i.loadShows()})).catch((function(){i.openErrorSnackbar("Unable to perform action. Please check your API settings.")}))},incrementEpisode:function(t){var e=this,i=t.lastEpisode+1,o=i>t.totalEpisodes?i:t.totalEpisodes;this.api.editShow(t.id,Object(r["a"])(Object(r["a"])({},t),{},{lastEpisode:i,totalEpisodes:o})).then((function(){return e.loadShows()})).catch((function(){e.openErrorSnackbar("Unable to perform action. Please check your API settings.")}))},loadShows:function(){var t=this;this.api.getShows().then((function(e){t.shows=e})).catch((function(){t.shows=[],t.openErrorSnackbar("Unable to retrieve shows. Please check your API settings.")}))},loadSettings:function(){this.settings.isRemote?this.api=z(this.settings.url,this.settings.key):this.api=U()},saveSettings:function(t){this.settings=t||Q,window.localStorage.setItem("settings",JSON.stringify(this.settings)),this.loadSettings(),this.$buefy.toast.open({message:"Settings saved.",position:"is-top"})},openSettingsModal:function(){this.closeSnackbar(),this.$buefy.modal.open({parent:this,component:S,onCancel:this.loadShows,props:{prefill:this.settings},events:{"save-settings":this.saveSettings,"load-shows":this.loadShows}})},openAddShowModal:function(){this.$buefy.modal.open({parent:this,component:b,events:{"add-show":this.addShow}})},openConfirmDeleteModal:function(t){this.closeSnackbar(),this.$buefy.modal.open({parent:this,component:C,props:{show:t},events:{"delete-show":this.deleteShow}})},openErrorSnackbar:function(t){this.closeSnackbar(),this.currentSnackbar=this.$buefy.snackbar.open({message:t,type:"is-danger",position:"is-top",actionText:"Settings",indefinite:!0,onAction:this.openSettingsModal})},closeSnackbar:function(){this.currentSnackbar&&this.currentSnackbar.close()}}},W=V,G=(i("d8fd"),Object(h["a"])(W,s,a,!1,null,"9ec055d6",null)),K=G.exports;i("5abe"),i("5363");o["a"].config.productionTip=!1,o["a"].use(n["a"]),new o["a"]({render:function(t){return t(K)}}).$mount("#app")},8341:function(t,e,i){},d8fd:function(t,e,i){"use strict";i("206b")},dd27:function(t,e,i){"use strict";i("8341")}});
//# sourceMappingURL=app.f9a64e4e.js.map